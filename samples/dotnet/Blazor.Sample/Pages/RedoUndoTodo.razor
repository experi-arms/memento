@page "/todo"
@using Blazor.Sample.Stores
@inherits ObserverComponet
@inject RedoUndoTodoStore RedoUndoTodoStore

<h3>RedoUndoTodo</h3>

<div class="px-4 container">
    <div class="d-flex flex-column">
        @foreach (var todo in RedoUndoTodoStore.State.Todos) {
            <div>@todo.IsCompleted @todo.Text</div>
        }
    </div>

    <div class="d-flex">
        <input @bind="text" />
        <button class="btn btn-primary" @onclick="@AddTodo">ADD</button>
    </div>

    <div class="d-flex mt-3">
        <button class="mt-3 btn btn-primary" @onclick="Undo">Undo</button>

        <button class="mt-3 btn btn-primary" @onclick="Redo">Redo</button>
    </div>
</div>

@code {
    string text = "";

    async Task AddTodo() {
        await RedoUndoTodoStore.CreateNewAsync(text);
        text = "";
    }

    async Task Redo() {
        await this.RedoUndoTodoStore.ReExecuteAsync();
    }

    async Task Undo() {
        await this.RedoUndoTodoStore.UnExecuteAsync();
    }
}
